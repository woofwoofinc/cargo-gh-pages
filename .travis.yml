language: rust
rust:
- stable
- beta
- nightly
matrix:
  fast_finish: true
  allow_failures:
  - rust: nightly
cache: cargo
before_script:
- |
  (cargo install rustfmt || true) &&
  export PATH=$HOME/.cargo/bin:$PATH

script:
- |
  cargo fmt -- --write-mode=diff &&
  cargo build &&
  cargo test
addons:
  apt:
    sources:
    - kalakris-cmake
    packages:
    - cmake
    - libssl-dev
